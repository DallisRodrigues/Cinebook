package com.cinebook.bookingservice.job;

import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Component;
import java.time.LocalDateTime;

@Component
public class BookingCleanupJob {

    // Runs every 60 seconds
    @Scheduled(fixedRate = 60000)
    public void cleanupOldBookings() {
        System.out.println("ðŸ¤– SCHEDULER: Checking for expired bookings at " + LocalDateTime.now());
        
        // In a real app, you would do:
        // List<Booking> expired = repo.findPendingBookingsOlderThan(10_MINUTES);
        // repo.deleteAll(expired);
        
        // For demo, just printing is enough to prove it works.
    }
}